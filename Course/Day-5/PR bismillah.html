<DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
</body>
<script>


  let arrData= [
        {
        Buah   : 'Jeruk',
        Harga  : 5000,
        Stock  : 10,
        Beli   : 0
        },
        {
        Buah    : 'Mangga',
        Harga   : 5000,
        Stock   : 20,
        Beli    : 0 
        },
        {
        Buah    : 'Apel',
        Harga   : 5000,
        Stock   : 10,
        Beli    : 0
        }
    ]

  let inputUserMenu;
  let inputUserMenuIndex;
  let inputUserQty;
  let isRepeat;
  let totalPrice;
  let userPayment;

  let menu = ''

  

  do {

    menu = ''

    for (let i = 0; i < arrData.length; i++) {
      menu += `${i + 1}. ${arrData[i].Buah} IDR ${arrData[i].Harga}/pcs (${arrData[i].Stock} items in stock)\n`
    }

    menu += `${arrData.length + 1}. Checkout`

    inputUserMenu = prompt(menu)
    inputUserMenuIndex = inputUserMenu - 1
  
    if (inputUserMenu == arrData.length + 1) {
      totalPrice = 0

      for (let i = 0; i < arrData.length; i++) {
        totalPrice += arrData[i].Harga * arrData[i].Beli
      }

      do {
        userPayment = prompt(`Total belanjaan anda sebesar IDR ${totalPrice}`)
  
        if (userPayment > totalPrice) {
          alert(`Kembalian anda IDR ${userPayment - totalPrice}`)
          isRepeat = false
        } else if (userPayment < totalPrice) {
          alert(`Uang anda kurang IDR ${totalPrice - userPayment}`)
          isRepeat = true
        } else if (userPayment == totalPrice) {
          alert('Terima kasih sudah membayar dengan uang pas')
          isRepeat = false
        }
      } while(isRepeat)

      for (let i = 0; i < arrInputs.length; i++) {
        arrStock[i] -= arrInputs[i]
        arrInputs[i] = 0
      }
      isRepeat = confirm('Belanja lagi gak?')

    } else {
      do {
        inputUserQty = parseInt(prompt(`Mau beli berapa ${arrData[inputUserMenuIndex].Buah}?`))
  
        if (arrData[inputUserMenuIndex].Stock >= (inputUserQty + arrData[inputUserMenuIndex].Beli)) {
          arrData[inputUserMenuIndex].Beli += inputUserQty
          isRepeat = false
        } else {
          alert(`Stock ${arrData[inputUserMenuIndex].Buah} tidak cukup`)
          isRepeat = true
        }
  
      } while(isRepeat)

      isRepeat = true
    }
  } while(isRepeat)

</script>
</html>